P8105\_hw2\_tg2753
================

``` r
library(tidyverse)
```

    ## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──

    ## ✓ ggplot2 3.3.5          ✓ purrr   0.3.4     
    ## ✓ tibble  3.1.4          ✓ dplyr   1.0.7     
    ## ✓ tidyr   1.1.4.9000     ✓ stringr 1.4.0     
    ## ✓ readr   2.0.2.9000     ✓ forcats 0.5.1

    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
library(readxl)
```

## Problem 1

Read and clean the Mr. Trash Wheel sheet:  
-specify the sheet in the Excel file and to omit non-data entries (rows
with notes / figures; columns containing notes) using arguments in
read\_excel -use reasonable variable names  
-omit rows that do not include dumpster-specific data  
-round the number of sports balls to the nearest integer

``` r
trashwheel_df = 
    read_excel("./Dataset/Trash-Wheel-Collection-Totals-7-2020-2.xlsx",
        sheet = "Mr. Trash Wheel",
        range = cell_cols("A:N")) %>% 
    janitor::clean_names() %>% 
    drop_na(dumpster) %>% 
    mutate(sports_balls = round(sports_balls))
```

Read and clean precipitation data for 2018 and 2019. For each, omit rows
without precipitation data and add a variable for year. Next, combine
precipitation datasets and convert month to a character variable.

``` r
precipitation_df_2018 = 
    read_excel("./Dataset/Trash-Wheel-Collection-Totals-7-2020-2.xlsx",
        sheet = "2018 Precipitation",
        skip = 1) %>% 
    janitor::clean_names() %>% 
    drop_na(month) %>% 
    mutate(year = 2018, month = month.name) 

precipitation_df_2019 = 
    read_excel("./Dataset/Trash-Wheel-Collection-Totals-7-2020-2.xlsx",
        sheet = "2019 Precipitation",
        skip = 1) %>% 
    janitor::clean_names() %>% 
    drop_na(month) %>% 
    mutate(year = 2019, month = month.name)

precipitation_df = left_join(precipitation_df_2018, precipitation_df_2019,
                             by = "month")
```

trashwheel\_df has 454 observations while the precipitation\_df has 12
observations.  
the total precipitation in 2018 is 70.33  
the median number of sports balls in a dumpster in 2019 is 9

## Problem 2

First, clean the data in pols-month.csv. Use separate() to break up the
variable mon into integer variables year, month, and day; replace month
number with month name; create a president variable taking values gop
and dem, and remove prez\_dem and prez\_gop; and remove the day
variable.

``` r
pols = read_csv("./Dataset/pols-month.csv") %>% 
    separate(col = mon, into = c("year", "month", "day")) %>% 
    mutate(year = as.character(year),
           month = as.integer(month),
           month = month.name[month],
           president = ifelse(prez_dem=="1","dem","gop")) %>% 
    select(-prez_dem, -prez_gop, -day) 
```

    ## Rows: 822 Columns: 9

    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon

    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Second, clean the data in snp.csv using a similar process to the above.
For consistency across datasets, arrange according to year and month,
and organize so that year and month are the leading columns.

``` r
snp = read_csv("./Dataset/snp.csv") %>% 
    mutate(date = lubridate::mdy(date)) %>%
    separate(col = date, into = c("year", "month", "day")) %>% 
    mutate(year = as.numeric(year),
           year = ifelse(year > 2021, year - 100, year)) %>% 
    arrange(year,month) %>%
    mutate(year = as.character(year),
           month = as.integer(month),
           month = month.name[month]) %>%
    select(-day)
```

    ## Rows: 787 Columns: 2

    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close

    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Third, tidy the unemployment data so that it can be merged with the
previous datasets. This process will involve switching from “wide” to
“long” format; ensuring that key variables have the same name; and
ensuring that key variables take the same values.

``` r
unemployment = read_csv("./Dataset/unemployment.csv") %>% 
     pivot_longer(Jan:Dec,
                 names_to = "month",
                 values_to = "unemployment_percentage") %>%
    mutate(Year = as.character(Year),
           month = match(month,month.abb),
           month = month.name[month]) %>%
    rename(year = Year) %>%
    relocate(year, month) %>% 
    arrange(year,month)
```

    ## Rows: 68 Columns: 13

    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec

    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Join the datasets by merging snp into pols, and merging unemployment
into the result.

``` r
result = left_join(left_join(pols,snp),unemployment)
```

    ## Joining, by = c("year", "month")
    ## Joining, by = c("year", "month")

The dataset ***pols*** has dimension of 822 x 9. It shows the number of
national politicians who are democratic or republican at any given time.
Then range of years is 1947 - 2015. The key variables in the ***pols***
are: year, month, gov\_gop, sen\_gop, rep\_gop, gov\_dem, sen\_dem,
rep\_dem, president.

The dataset ***snp*** has dimension of 787 x 3. It shows the closing
values of the S&P stock (Standard & Poor’s) index, which is often used
as a representative measure of stock market as a whole. Then range of
years is 1950 - 2015. The key variables in the ***snp*** are: year,
month, close.

The dataset ***unemployment*** has dimension of 816 x 3. It shows the
percentage of unemployment on the associated date. Then range of years
is 1948 - 2015. The key variables in the ***unemployment*** are: year,
month, unemployment\_percentage.

The resulting dataset, ***result***, has dimension is 822 x 11. Then
range of years is 1947 - 2015. The key variables in the ***result***
are: year, month, gov\_gop, sen\_gop, rep\_gop, gov\_dem, sen\_dem,
rep\_dem, president, close, unemployment\_percentage.

## Problem 3
